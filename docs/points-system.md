# 🎯 漂流瓶机器人积分系统方案

## 📋 系统概述

漂流瓶机器人积分系统旨在提升用户参与度和粘性，通过多维度的积分获取和消费机制，构建一个有趣的社交游戏体验。

## 💰 积分获取规则

### 基础行为积分
| 行为 | 积分奖励 | 说明 |
|------|----------|------|
| 投放漂流瓶 | +10积分 | 每次投放漂流瓶获得 |
| 捡拾漂流瓶 | +5积分 | 每次捡拾漂流瓶获得 |
| 回复他人漂流瓶 | +8积分 | 每次回复获得 |
| 收到他人回复 | +3积分 | 瓶子被回复时获得 |
| 每日签到 | +5积分 | 基础签到奖励，根据等级有加成 |

### 互动奖励积分
| 触发条件 | 积分奖励 | 说明 |
|----------|----------|------|
| 漂流瓶被回复 | +2积分/回复 | 每收到一个回复获得 |
| 连续签到7天 | +20积分 | 额外奖励，重置连击 |
| 连续签到30天 | +100积分 | 超级奖励 |

### 时间加成机制
| 时间段 | 倍数 | 说明 |
|--------|------|------|
| 深夜活跃 (22:00-06:00) | ×1.5 | 所有积分行为加成 |
| 周末加成 (周六日) | ×1.2 | 周末活跃奖励 |
| 节假日特殊 | ×2.0 | 特殊节日配置 |

## 🏆 等级系统

### 等级划分与特权

#### 🌊 新手水手 (0-99积分)
- **基础功能**：投放、捡拾、回复漂流瓶
- **签到奖励**：+5积分
- **特殊标识**：无

#### ⚓ 见习船员 (100-299积分)
- **继承功能**：新手水手所有功能
- **签到奖励**：+7积分
- **商店权限**：解锁基础商品
- **特殊标识**：无

#### 🚢 资深航海者 (300-599积分)
- **继承功能**：见习船员所有功能
- **签到奖励**：+10积分
- **商店权限**：解锁高级商品
- **特殊标识**：发送消息带⚓标识

#### 🏴‍☠️ 海洋探索家 (600-999积分)
- **继承功能**：资深航海者所有功能
- **签到奖励**：+15积分
- **商店权限**：解锁专属商品
- **特殊标识**：发送消息带🏴‍☠️标识
- **额外权限**：查看排行榜详细信息

#### 👑 漂流瓶大师 (1000+积分)
- **继承功能**：海洋探索家所有功能
- **签到奖励**：+20积分
- **商店权限**：解锁所有商品
- **特殊标识**：发送消息带👑标识
- **额外权限**：特殊管理命令

## 🛍️ 积分商店

### 功能特权类

#### 额外投放次数 (+5次/天)
- **价格**：100积分
- **有效期**：1天
- **效果**：增加每日漂流瓶投放限制5次
- **等级要求**：见习船员及以上

#### 无冷却投放
- **价格**：150积分
- **有效期**：24小时
- **效果**：跳过投放时间限制
- **等级要求**：资深航海者及以上

#### 选择性捡拾
- **价格**：300积分
- **有效期**：7天
- **效果**：可跳过不喜欢的瓶子重新捡拾
- **等级要求**：海洋探索家及以上

#### 💎VIP会员
- **价格**：200积分
- **有效期**：30天
- **效果**：
  - 昵称显示💎VIP标识
  - 所有行为获得1.2倍积分
  - 每日签到额外+3积分
  - 发送漂流瓶带✨特效标识
  - 专属VIP命令权限
- **等级要求**：见习船员及以上

### 体验增强类

#### 🎨彩色消息
- **价格**：50积分
- **有效期**：7天
- **效果**：漂流瓶带特殊emoji装饰
- **等级要求**：新手水手及以上

#### 📝自定义签名
- **价格**：100积分
- **有效期**：30天
- **效果**：在漂流瓶末尾显示个人签名
- **等级要求**：见习船员及以上

#### 🕶️匿名保护
- **价格**：80积分
- **有效期**：24小时
- **效果**：隐藏用户名显示
- **等级要求**：资深航海者及以上

#### 🔐消息加密
- **价格**：200积分
- **消费类型**：次数消费
- **效果**：只有指定等级以上用户可见
- **等级要求**：海洋探索家及以上

### 社交功能类

#### 👥好友系统
- **价格**：300积分
- **有效期**：30天
- **效果**：可指定发送给特定用户
- **等级要求**：海洋探索家及以上

#### 🏘️群组漂流
- **价格**：500积分
- **有效期**：7天
- **效果**：创建限定群组的漂流瓶
- **等级要求**：漂流瓶大师

#### ↩️消息撤回
- **价格**：150积分
- **消费类型**：次数消费
- **效果**：24小时内可撤回已发送的漂流瓶
- **等级要求**：资深航海者及以上

### 概率增强类

#### 🍀幸运加成
- **价格**：200积分
- **有效期**：24小时
- **效果**：稀有瓶子概率+20%
- **等级要求**：海洋探索家及以上

#### ⭐回复优先
- **价格**：100积分
- **有效期**：24小时
- **效果**：你的瓶子更容易被其他用户看到
- **等级要求**：资深航海者及以上

#### 💫双倍积分卡
- **价格**：250积分
- **有效期**：24小时
- **效果**：所有行为获得双倍积分
- **等级要求**：海洋探索家及以上

## 🎮 特殊机制

### 连击系统
- **连续投放**：连续3天投放瓶子，第4天起每次额外+2积分
- **连续捡拾**：连续5天捡拾瓶子，第6天起每次额外+1积分
- **连续回复**：连续回复不同瓶子，每连击额外+1积分（最高+5）

### 成就系统
| 成就名称 | 触发条件 | 奖励积分 |
|----------|----------|----------|
| 首次投放 | 投放第一个漂流瓶 | +20积分 |
| 投放达人 | 累计投放100个瓶子 | +100积分 |
| 回复专家 | 累计回复50个瓶子 | +80积分 |
| 人气瓶子 | 单个瓶子收到10个回复 | +50积分 |
| 社交达人 | 与20个不同用户互动 | +150积分 |

### 限时活动
- **周末狂欢**：周末所有商品8折优惠
- **月度挑战**：月度积分排行前10名额外奖励
- **节假日礼包**：特殊节日限定商品和积分包

## 📊 积分管理

### 反滥用机制
- **每日投放限制**：基础5个/天，可通过商品增加
- **回复冷却**：同一用户回复间隔至少5分钟
- **积分上限**：单日最多获得200积分（VIP用户240积分）
- **异常检测**：快速重复操作自动限制

### 积分回收机制
- **长期不活跃**：超过30天未活动，每天自动扣除1积分
- **违规行为**：根据严重程度扣除10-100积分
- **积分过期**：购买的临时特权到期自动失效

### 数据统计面板
- **个人面板**：总积分、可用积分、等级进度、今日获得积分
- **历史记录**：积分获得/消费详细记录、商品购买历史
- **排行榜系统**：总积分排行、等级排行、月度活跃用户排行

## 🛠️ 技术实现要点

### 数据库设计
- `user_points` - 用户积分主表
- `points_transactions` - 积分交易记录表
- `points_shop_items` - 商店商品配置表
- `user_purchases` - 用户购买记录表
- `user_achievements` - 用户成就记录表

### 核心服务模块
- `PointsService` - 积分管理核心服务
- `ShopService` - 商店功能服务
- `AchievementService` - 成就系统服务
- `LevelService` - 等级系统服务

### 安全考虑
- 积分操作事务安全
- 防刷机制
- 数据一致性检查
- 异常操作监控

## 📈 预期效果

### 用户参与度提升
- 每日活跃用户增长30%
- 用户留存率提升50%
- 平均使用时长增加40%

### 社交互动增强
- 用户间互动频次提升60%
- 回复率提升35%
- 新用户转化率提升25%

### 商业价值
- 为后续付费功能打下基础
- 提供用户分级管理依据
- 构建完整的用户激励体系 